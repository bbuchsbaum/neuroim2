<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>MappedNeuroVec Class — MappedNeuroVec-class • neuroim2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MappedNeuroVec Class — MappedNeuroVec-class"><meta name="description" content="A class representing a four-dimensional brain image backed by a memory-mapped file.
This class provides efficient access to large brain images without loading the
entire dataset into memory.
The MappedNeuroVec class provides memory-efficient access to large neuroimaging
datasets through memory mapping. This allows processing of datasets larger than available
RAM by keeping data on disk and only loading requested portions into memory.
Creates a MappedNeuroVec object that provides efficient,
memory-mapped access to large neuroimaging datasets. This allows processing of
data larger than available RAM by keeping it on disk and only loading requested
portions into memory."><meta property="og:description" content="A class representing a four-dimensional brain image backed by a memory-mapped file.
This class provides efficient access to large brain images without loading the
entire dataset into memory.
The MappedNeuroVec class provides memory-efficient access to large neuroimaging
datasets through memory mapping. This allows processing of datasets larger than available
RAM by keeping data on disk and only loading requested portions into memory.
Creates a MappedNeuroVec object that provides efficient,
memory-mapped access to large neuroimaging datasets. This allows processing of
data larger than available RAM by keeping it on disk and only loading requested
portions into memory."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">neuroim2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ImageVolumes.html">Working with Image Volumes</a></li>
    <li><a class="dropdown-item" href="../articles/NeuroVector.html">Four dimensional neuroimaging data</a></li>
    <li><a class="dropdown-item" href="../articles/pipelines.html">Pipelines</a></li>
    <li><a class="dropdown-item" href="../articles/regionOfInterest.html">Regions of Interest</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbuchsbaum/neuroim2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MappedNeuroVec Class</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/neuroim2/blob/HEAD/R/all_class.R" class="external-link"><code>R/all_class.R</code></a>, <a href="https://github.com/bbuchsbaum/neuroim2/blob/HEAD/R/mapped_neurovec.R" class="external-link"><code>R/mapped_neurovec.R</code></a></small>
      <div class="d-none name"><code>MappedNeuroVec-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A class representing a four-dimensional brain image backed by a memory-mapped file.
This class provides efficient access to large brain images without loading the
entire dataset into memory.</p>
<p>The <code>MappedNeuroVec</code> class provides memory-efficient access to large neuroimaging
datasets through memory mapping. This allows processing of datasets larger than available
RAM by keeping data on disk and only loading requested portions into memory.</p>
<p>Creates a <code>MappedNeuroVec</code> object that provides efficient,
memory-mapped access to large neuroimaging datasets. This allows processing of
data larger than available RAM by keeping it on disk and only loading requested
portions into memory.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">MappedNeuroVec</span><span class="op">(</span><span class="va">file_name</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">file_name</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file-name">file_name<a class="anchor" aria-label="anchor" href="#arg-file-name"></a></dt>
<dd><p>Character string specifying the path to the neuroimaging file.
Supported formats include NIFTI (.nii) and ANALYZE (.hdr/.img).</p></dd>


<dt id="arg-label">label<a class="anchor" aria-label="anchor" href="#arg-label"></a></dt>
<dd><p>Optional character string providing a label for the vector</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A new <code>MappedNeuroVec</code> object providing:</p><ul><li><p>Memory-mapped access to the data</p></li>
<li><p>Spatial and temporal indexing</p></li>
<li><p>Efficient data extraction</p></li>
<li><p>Automatic memory management</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>MappedNeuroVec objects use memory-mapped files to store and access large 4D brain
images efficiently. This approach allows for rapid access to specific portions of
the data without requiring the entire dataset to be loaded into memory at once.</p>
<p>Create a Memory-Mapped Neuroimaging Vector</p>

<p>The function implements several key features:</p><ul><li><p>Zero-copy access to file data</p></li>
<li><p>Automatic memory management</p></li>
<li><p>Support for large datasets</p></li>
<li><p>Efficient random access</p></li>
<li><p>Proper cleanup on object deletion</p></li>
</ul><p>Memory mapping is particularly useful when:</p><ul><li><p>Working with large datasets</p></li>
<li><p>Only portions of data are needed at once</p></li>
<li><p>Random access is required</p></li>
<li><p>Multiple processes need to share data</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="slots">Slots<a class="anchor" aria-label="anchor" href="#slots"></a></h2>


<dl><dt><code>filemap</code></dt>
<dd><p>An object of class <code>mmap</code> representing the memory-mapped file
containing the brain image data.</p></dd>


<dt><code>offset</code></dt>
<dd><p>An integer representing the byte offset within the memory-mapped file
where the brain image data starts.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>This class inherits methods from <code><a href="NeuroVec-class.html">NeuroVec</a></code> and implements
the <code>ArrayLike4D</code> interface. Additional methods specific to memory-mapped
operations may be available.</p>
    </div>
    <div class="section level2">
    <h2 id="implementation-details">Implementation Details<a class="anchor" aria-label="anchor" href="#implementation-details"></a></h2>


<p>The class uses the <code>mmap</code> package to establish a memory mapping between the file
and memory space. Key features include:</p><ul><li><p>Zero-copy access to file data</p></li>
<li><p>Automatic memory management</p></li>
<li><p>Support for large datasets</p></li>
<li><p>Efficient random access</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="NeuroVec-class.html">NeuroVec-class</a></code> for the parent class.
<code><a href="https://rdrr.io/pkg/mmap/man/mmap.html" class="external-link">mmap</a></code> for details on memory-mapped file objects.</p>
<p><code>MappedNeuroVec</code> for creating instances of this class</p>
<p><code><a href="https://rdrr.io/pkg/mmap/man/mmap.html" class="external-link">mmap</a></code> for memory mapping details</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create a MappedNeuroVec object (pseudo-code)</span></span></span>
<span class="r-in"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="st">"/path/to/large/brain/image.dat"</span></span></span>
<span class="r-in"><span><span class="va">mapped_vec</span> <span class="op">&lt;-</span> <span class="fu">MappedNeuroVec</span><span class="op">(</span><span class="va">file_path</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span>, <span class="fl">64</span>, <span class="fl">32</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access a subset of the data</span></span></span>
<span class="r-in"><span><span class="va">subset</span> <span class="op">&lt;-</span> <span class="va">mapped_vec</span><span class="op">[</span>,,, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create mapped vector from NIFTI file</span></span></span>
<span class="r-in"><span><span class="va">mvec</span> <span class="op">&lt;-</span> <span class="fu">MappedNeuroVec</span><span class="op">(</span><span class="st">"path/to/fmri.nii"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract first volume</span></span></span>
<span class="r-in"><span><span class="va">vol1</span> <span class="op">&lt;-</span> <span class="va">mvec</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get dimensions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dim-methods.html">dim</a></span><span class="op">(</span><span class="va">mvec</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access specific timepoint</span></span></span>
<span class="r-in"><span><span class="va">timepoint</span> <span class="op">&lt;-</span> <span class="va">mvec</span><span class="op">[</span>, , , <span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bradley R Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

