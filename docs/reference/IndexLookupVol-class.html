<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IndexLookupVol Class — IndexLookupVol-class • neuroim2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="IndexLookupVol Class — IndexLookupVol-class"><meta name="description" content="A three-dimensional brain image class that serves as a map between 1D grid indices
and a table of values. This class is primarily used in conjunction with the
SparseNeuroVec class to efficiently represent and access
sparse neuroimaging data.
The IndexLookupVol class provides efficient indexing and coordinate lookup
functionality for 3D neuroimaging data. It maintains a mapping between linear indices
and 3D coordinates, optimizing memory usage and access speed for sparse volumes.
Creates an IndexLookupVol object, which provides efficient
bidirectional mapping between linear indices and 3D coordinates in a neuroimaging
volume. This is particularly useful for working with masked or sparse brain volumes."><meta property="og:description" content="A three-dimensional brain image class that serves as a map between 1D grid indices
and a table of values. This class is primarily used in conjunction with the
SparseNeuroVec class to efficiently represent and access
sparse neuroimaging data.
The IndexLookupVol class provides efficient indexing and coordinate lookup
functionality for 3D neuroimaging data. It maintains a mapping between linear indices
and 3D coordinates, optimizing memory usage and access speed for sparse volumes.
Creates an IndexLookupVol object, which provides efficient
bidirectional mapping between linear indices and 3D coordinates in a neuroimaging
volume. This is particularly useful for working with masked or sparse brain volumes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">neuroim2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ImageVolumes.html">Working with Image Volumes</a></li>
    <li><a class="dropdown-item" href="../articles/neuroim.html">The neuroim2 package</a></li>
    <li><a class="dropdown-item" href="../articles/NeuroVector.html">Four dimensional neuroimaging data</a></li>
    <li><a class="dropdown-item" href="../articles/pipelines.html">Pipelines</a></li>
    <li><a class="dropdown-item" href="../articles/regionOfInterest.html">Regions of Interest</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbuchsbaum/neuroim2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>IndexLookupVol Class</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/neuroim2/blob/HEAD/R/all_class.R" class="external-link"><code>R/all_class.R</code></a>, <a href="https://github.com/bbuchsbaum/neuroim2/blob/HEAD/R/index_vol.R" class="external-link"><code>R/index_vol.R</code></a></small>
      <div class="d-none name"><code>IndexLookupVol-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A three-dimensional brain image class that serves as a map between 1D grid indices
and a table of values. This class is primarily used in conjunction with the
<code><a href="SparseNeuroVec-class.html">SparseNeuroVec</a></code> class to efficiently represent and access
sparse neuroimaging data.</p>
<p>The <code>IndexLookupVol</code> class provides efficient indexing and coordinate lookup
functionality for 3D neuroimaging data. It maintains a mapping between linear indices
and 3D coordinates, optimizing memory usage and access speed for sparse volumes.</p>
<p>Creates an <code>IndexLookupVol</code> object, which provides efficient
bidirectional mapping between linear indices and 3D coordinates in a neuroimaging
volume. This is particularly useful for working with masked or sparse brain volumes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">IndexLookupVol</span><span class="op">(</span><span class="va">space</span>, <span class="va">indices</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-space">space<a class="anchor" aria-label="anchor" href="#arg-space"></a></dt>
<dd><p>A <code><a href="NeuroSpace-class.html">NeuroSpace</a></code> object defining the 3D space dimensions,
spacing, and orientation.</p></dd>


<dt id="arg-indices">indices<a class="anchor" aria-label="anchor" href="#arg-indices"></a></dt>
<dd><p>An integer vector containing the linear indices of the voxels to include
in the lookup volume. These should be 1-based indices within the range of the space.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>IndexLookupVol</code> containing:</p><ul><li><p>A mapping between linear indices and sparse positions</p></li>
<li><p>The original space information</p></li>
<li><p>The subset of included voxel indices</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The IndexLookupVol class extends <code><a href="NeuroVol-class.html">NeuroVol</a></code> and provides a
mechanism for efficient lookup and mapping of sparse 3D neuroimaging data. It
stores only the indices of non-zero voxels and their corresponding mappings,
allowing for memory-efficient representation of large, sparse brain images.</p>
<p>Create an IndexLookupVol Object</p>
    </div>
    <div class="section level2">
    <h2 id="slots">Slots<a class="anchor" aria-label="anchor" href="#slots"></a></h2>


<dl><dt><code>space</code></dt>
<dd><p>A <code><a href="NeuroSpace-class.html">NeuroSpace</a></code> object representing the 3D space of the brain image.</p></dd>


<dt><code>indices</code></dt>
<dd><p>An integer vector containing the 1D indices of the non-zero voxels in the grid.</p></dd>


<dt><code>map</code></dt>
<dd><p>An integer vector containing the mapping between the 1D indices and the table of values.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>This class inherits methods from <code><a href="NeuroVol-class.html">NeuroVol</a></code>. Additional
methods specific to index lookup and mapping operations may be available.</p>
    </div>
    <div class="section level2">
    <h2 id="implementation-details">Implementation Details<a class="anchor" aria-label="anchor" href="#implementation-details"></a></h2>


<p>The class uses an integer mapping array for O(1) lookups between linear indices
and their corresponding positions in the sparse representation.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="SparseNeuroVec-class.html">SparseNeuroVec-class</a></code> for the primary class that utilizes IndexLookupVol.
<code><a href="NeuroVol-class.html">NeuroVol-class</a></code> for the base volumetric image class.</p>
<p><code>IndexLookupVol</code> for creating instances of this class</p>
<p><code><a href="coords.html">coords</a></code> for coordinate lookup,
<code><a href="lookup.html">lookup</a></code> for index mapping,
<code><a href="NeuroSpace-class.html">NeuroSpace</a></code> for space representation</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a NeuroSpace object</span></span></span>
<span class="r-in"><span><span class="va">space</span> <span class="op">&lt;-</span> <span class="fu"><a href="NeuroSpace.html">NeuroSpace</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">2L</span>, <span class="fl">2L</span><span class="op">)</span>, origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, spacing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a 3D mask</span></span></span>
<span class="r-in"><span><span class="va">mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create indices and map for the IndexLookupVol</span></span></span>
<span class="r-in"><span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">mask</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">indices</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an IndexLookupVol object</span></span></span>
<span class="r-in"><span><span class="va">ilv</span> <span class="op">&lt;-</span> <span class="fu">IndexLookupVol</span><span class="op">(</span>space <span class="op">=</span> <span class="va">space</span>, indices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">indices</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access the indices</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ilv</span><span class="op">@</span><span class="va">indices</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 3 6 8</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access the map</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ilv</span><span class="op">@</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 0 2 0 0 3 0 4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create a 64x64x64 space</span></span></span>
<span class="r-in"><span><span class="va">space</span> <span class="op">&lt;-</span> <span class="fu"><a href="NeuroSpace.html">NeuroSpace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span>, <span class="fl">64</span>, <span class="fl">64</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a lookup volume with random indices</span></span></span>
<span class="r-in"><span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">262144</span>, <span class="fl">10000</span><span class="op">)</span>  <span class="co"># Select 10000 random voxels</span></span></span>
<span class="r-in"><span><span class="va">ilv</span> <span class="op">&lt;-</span> <span class="fu">IndexLookupVol</span><span class="op">(</span><span class="va">space</span>, <span class="va">indices</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Look up coordinates for specific indices</span></span></span>
<span class="r-in"><span><span class="va">coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="coords.html">coords</a></span><span class="op">(</span><span class="va">ilv</span>, <span class="va">indices</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bradley R Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

