<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NeuroVec Class — NeuroVec-class • neuroim2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="NeuroVec Class — NeuroVec-class"><meta name="description" content="This S4 class represents a four-dimensional brain image, which is used to store
and process time series neuroimaging data such as fMRI or 4D functional
connectivity maps. The class extends the basic functionality of NeuroObj.
The NeuroVec class represents a vectorized form of neuroimaging data, supporting both in-memory
and file-backed data modes. It provides efficient data storage and access methods and integrates with
the spatial reference system provided by NeuroSpace."><meta property="og:description" content="This S4 class represents a four-dimensional brain image, which is used to store
and process time series neuroimaging data such as fMRI or 4D functional
connectivity maps. The class extends the basic functionality of NeuroObj.
The NeuroVec class represents a vectorized form of neuroimaging data, supporting both in-memory
and file-backed data modes. It provides efficient data storage and access methods and integrates with
the spatial reference system provided by NeuroSpace."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">neuroim2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbuchsbaum/neuroim2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NeuroVec Class</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/neuroim2/blob/HEAD/R/all_class.R" class="external-link"><code>R/all_class.R</code></a>, <a href="https://github.com/bbuchsbaum/neuroim2/blob/HEAD/R/neurovec.R" class="external-link"><code>R/neurovec.R</code></a></small>
      <div class="d-none name"><code>NeuroVec-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This S4 class represents a four-dimensional brain image, which is used to store
and process time series neuroimaging data such as fMRI or 4D functional
connectivity maps. The class extends the basic functionality of <code><a href="NeuroObj-class.html">NeuroObj</a></code>.</p>
<p>The <code>NeuroVec</code> class represents a vectorized form of neuroimaging data, supporting both in-memory
and file-backed data modes. It provides efficient data storage and access methods and integrates with
the spatial reference system provided by <code><a href="NeuroSpace-class.html">NeuroSpace</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">NeuroVec</span><span class="op">(</span><span class="va">data</span>, space <span class="op">=</span> <span class="cn">NULL</span>, mask <span class="op">=</span> <span class="cn">NULL</span>, label <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The image data. This can be:</p><ul><li><p>A matrix (voxels x time points)</p></li>
<li><p>A 4D array</p></li>
<li><p>A list of <code><a href="NeuroVol-class.html">NeuroVol</a></code> objects</p></li>
</ul><p>If a list of NeuroVol objects is provided, the geometric space (<code>NeuroSpace</code>)
will be inferred from the constituent volumes, which must all be identical.</p></dd>


<dt id="arg-space">space<a class="anchor" aria-label="anchor" href="#arg-space"></a></dt>
<dd><p>An optional <code><a href="NeuroSpace-class.html">NeuroSpace</a></code> object defining the spatial
properties of the image. Not required if <code>data</code> is a list of NeuroVol objects.</p></dd>


<dt id="arg-mask">mask<a class="anchor" aria-label="anchor" href="#arg-mask"></a></dt>
<dd><p>An optional logical array specifying which voxels to include. If provided,
a SparseNeuroVec object will be created.</p></dd>


<dt id="arg-label">label<a class="anchor" aria-label="anchor" href="#arg-label"></a></dt>
<dd><p>A character string providing a label for the NeuroVec object. Default is an empty string.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A concrete instance of the <code>NeuroVec</code> class:</p><ul><li><p>If <code>mask</code> is provided: a <code><a href="SparseNeuroVec-class.html">SparseNeuroVec</a></code> object</p></li>
<li><p>Otherwise: a <code><a href="DenseNeuroVec-class.html">DenseNeuroVec</a></code> object</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>NeuroVec objects are designed to handle 4D neuroimaging data, where the first
three dimensions represent spatial coordinates, and the fourth dimension typically
represents time or another series dimension. This structure is particularly
useful for storing and analyzing functional MRI data, time series of brain
states, or multiple 3D volumes in a single object.</p>
<p>The function performs several operations:</p><ul><li><p>If <code>data</code> is a list of NeuroVol objects, it combines them into a single 4D array.</p></li>
<li><p>It checks that the dimensions of <code>data</code> match the provided <code>space</code>.</p></li>
<li><p>Depending on whether a <code>mask</code> is provided, it creates either a DenseNeuroVec
    or a SparseNeuroVec object.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="slots">Slots<a class="anchor" aria-label="anchor" href="#slots"></a></h2>


<dl><dt>space</dt>
<dd><p>A <code><a href="NeuroSpace-class.html">NeuroSpace</a></code> object defining the spatial properties of the image.</p></dd>

  <dt>label</dt>
<dd><p>A character string providing a label for the NeuroVec object.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>Methods specific to NeuroVec objects may include operations for time series
analysis, 4D data manipulation, and extraction of 3D volumes or time courses.</p>
    </div>
    <div class="section level2">
    <h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h2>


<p>To create a NeuroVec object, use the constructor function <code>NeuroVec()</code>.
This function should handle the appropriate initialization of the 4D data
structure and associated spatial information.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="NeuroObj-class.html">NeuroObj-class</a></code> for the parent class.
<code><a href="DenseNeuroVec-class.html">DenseNeuroVec-class</a></code> and <code><a href="SparseNeuroVec-class.html">SparseNeuroVec-class</a></code> for specific implementations.</p>
<p><code><a href="NeuroSpace-class.html">NeuroSpace</a></code> for spatial information,
<code><a href="sub_vector-methods.html">sub_vector</a></code> for subsetting routines, and
<code><a href="index_to_coord-methods.html">index_to_coord</a></code> for coordinate conversion.
<code><a href="DenseNeuroVec-class.html">DenseNeuroVec-class</a></code>, <code><a href="SparseNeuroVec-class.html">SparseNeuroVec-class</a></code> for the
specific NeuroVec types.
<code><a href="NeuroVol-class.html">NeuroVol-class</a></code> for 3D volumetric data.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load an example 4D brain image</span></span></span>
<span class="r-in"><span><span class="va">example_4d_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_vec.html">read_vec</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"global_mask_v4.nii"</span>, package <span class="op">=</span> <span class="st">"neuroim2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a NeuroVec object</span></span></span>
<span class="r-in"><span><span class="va">neuro_vec</span> <span class="op">&lt;-</span> <span class="fu">NeuroVec</span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">64</span><span class="op">*</span><span class="fl">64</span><span class="op">*</span><span class="fl">32</span><span class="op">*</span><span class="fl">10</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span>, <span class="fl">64</span>, <span class="fl">32</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      space <span class="op">=</span> <span class="fu"><a href="NeuroSpace.html">NeuroSpace</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span>, <span class="fl">64</span>, <span class="fl">32</span>,<span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      spacing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="dim-methods.html">dim</a></span><span class="op">(</span><span class="va">neuro_vec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 64 64 32 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract a single 3D volume (e.g., the first time point)</span></span></span>
<span class="r-in"><span><span class="va">first_volume</span> <span class="op">&lt;-</span> <span class="va">neuro_vec</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load an example 4D brain image</span></span></span>
<span class="r-in"><span><span class="va">example_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"global_mask_v4.nii"</span>, package <span class="op">=</span> <span class="st">"neuroim2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">example_4d_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_vec.html">read_vec</a></span><span class="op">(</span><span class="va">example_file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a DenseNeuroVec object</span></span></span>
<span class="r-in"><span><span class="va">dense_vec</span> <span class="op">&lt;-</span> <span class="fu">NeuroVec</span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_4d_image</span><span class="op">@</span><span class="va">.Data</span>,</span></span>
<span class="r-in"><span>                      space <span class="op">=</span> <span class="fu"><a href="space-methods.html">space</a></span><span class="op">(</span><span class="va">example_4d_image</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dense_vec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">DenseNeuroVec</span> <span style="color: #555555;">(3.13 bytes MB)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">- Spatial Info</span><span style="color: #555555;"> ---------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Dimensions</span>    : 64 x 64 x 25<span style="color: #555555;"> (</span>4 timepoints<span style="color: #555555;">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Total Voxels</span>  : 102,400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Spacing</span>       : 3.5 x 3.5 x 3.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">- Properties</span><span style="color: #555555;"> ---------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Origin</span>        : 112 x -108 x -46.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Orientation</span>   : Right-to-Left Posterior-to-Anterior Inferior-to-Superior</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">- Statistics</span><span style="color: #555555;"> ---------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     <span style="color: #555555;">Mean +/- SD</span>    : 0.288 +/- 0.453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a SparseNeuroVec object with a mask</span></span></span>
<span class="r-in"><span><span class="va">mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="fu"><a href="dim-methods.html">dim</a></span><span class="op">(</span><span class="va">example_4d_image</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>              dim <span class="op">=</span> <span class="fu"><a href="dim-methods.html">dim</a></span><span class="op">(</span><span class="va">example_4d_image</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sparse_vec</span> <span class="op">&lt;-</span> <span class="fu">NeuroVec</span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_4d_image</span><span class="op">@</span><span class="va">.Data</span>,</span></span>
<span class="r-in"><span>                       space <span class="op">=</span> <span class="fu"><a href="space-methods.html">space</a></span><span class="op">(</span><span class="va">example_4d_image</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       mask <span class="op">=</span> <span class="va">mask</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sparse_vec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">SparseNeuroVec</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">+= Spatial Info </span><span style="color: #555555;">---------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Dimensions</span>    : 64 x 64 x 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Time Points</span>   : 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Spacing</span>       : 3.5 x 3.5 x 3.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Origin</span>        : 112 x -108 x -46.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">+- Sparse Info  </span><span style="color: #555555;">----------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | <span style="color: #BBBB00;">Cardinality</span>   : 51134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">+= Memory Usage </span><span style="color: #555555;">--------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #BBBB00;">Size</span>          : 2.56 MB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bradley R Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

